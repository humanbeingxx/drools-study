package priv.cxs.drools.usetest.cashflow

rule "increase balance for credits"

when
    $ap : AccountPeriod()
    $acc : Account( $accountNo : accountNo )
    CashFlow(type == CREDIT, accountNo == $accountNo, date >= $ap.startDate && date <= $ap.endDate, $amount:amount)
then
    $acc.setBalance($acc.getBalance() + $amount);
end


rule "decrease balance for debits"

when
    $ap : AccountPeriod()
    $acc : Account( $accountNo : accountNo )
    CashFlow(type == DEBIT, accountNo == $accountNo, date >= $ap.startDate && date <= $ap.endDate, $amount:amount)
then
    $acc.setBalance($acc.getBalance() - $amount);
end